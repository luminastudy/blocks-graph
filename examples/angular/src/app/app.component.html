<div class="app">
  <header class="header">
    <h1>&#64;lumina-study/blocks-graph</h1>
    <p *ngIf="!blocks">Loading data...</p>
    <ng-container *ngIf="blocks">
      <p>The Open University - Combinatorics Course</p>
      <small>Using Web Component with CUSTOM_ELEMENTS_SCHEMA</small>
    </ng-container>
  </header>

  <!-- Loading State -->
  <div *ngIf="!blocks" class="info-panel">
    <p>{{ status }}</p>
  </div>

  <!-- Main Content -->
  <ng-container *ngIf="blocks">
    <!-- Interactive Controls Panel -->
    <div class="controls">
      <div class="control-group">
        <label for="language-select">Language:</label>
        <select id="language-select" [(ngModel)]="language" (ngModelChange)="onLanguageChange()">
          <option value="en">English</option>
          <option value="he">Hebrew</option>
        </select>
      </div>

      <div class="control-group">
        <label for="orientation-select">Orientation:</label>
        <select id="orientation-select" [(ngModel)]="orientation" (ngModelChange)="onOrientationChange()">
          <option value="ttb">Top to Bottom</option>
          <option value="ltr">Left to Right</option>
          <option value="rtl">Right to Left</option>
          <option value="btt">Bottom to Top</option>
        </select>
      </div>

      <div class="control-group checkbox">
        <label>
          <input type="checkbox" [(ngModel)]="showPrerequisites" (ngModelChange)="onShowPrerequisitesChange()" />
          Show Prerequisites
        </label>
      </div>
    </div>

    <!-- Web Component with ViewChild access -->
    <div class="graph-container">
      <blocks-graph
        #graphElement
        [attr.language]="language"
        [attr.orientation]="orientation"
        [attr.show-prerequisites]="showPrerequisites"
        style="width: 100%; height: 600px; display: block;"
      ></blocks-graph>
    </div>

    <!-- Info Panel -->
    <div class="info-panel">
      <h3>Web Component Integration</h3>
      <ul>
        <li>Uses CUSTOM_ELEMENTS_SCHEMA for web component support</li>
        <li>ViewChild for direct element access</li>
        <li>Event listeners for blocks-rendered and block-selected</li>
        <li>Works with any web component</li>
      </ul>
      <div class="status">
        <strong>Status:</strong> {{ status }}
      </div>
      <div *ngIf="selectedBlock" class="selected-block">
        <strong>Selected Block ID:</strong> {{ selectedBlock.substring(0, 8) }}...
      </div>
    </div>
  </ng-container>
</div>
